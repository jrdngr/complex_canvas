!function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=0)}([function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=n(1),o=n(2),i=r.PlotBounds.fromBounds(-10,10,-10,10),a=500,s=t=>t.exponent(2);function c(){const t=new r.Plot(i,a,a);document.body.appendChild(t.canvas);const e=function(t,e,n=100){const i=s(o.Complex.fromRectangular(e.xMin,e.yMin)),a=s(o.Complex.fromRectangular(e.xMax,e.yMax));let c=i.re,u=a.re,l=i.im,h=a.im;const d=e.xRange/n,f=e.yRange/n;for(let t=e.xMin;t<e.xMax;t+=d)for(let n=e.yMin;n<e.yMax;n+=f){const e=s(o.Complex.fromRectangular(t,n));c=Math.min(e.re,c),u=Math.max(e.re,u),l=Math.min(e.im,l),h=Math.max(e.im,h)}return console.log(r.PlotBounds.fromBounds(c,u,l,h)),r.PlotBounds.fromBounds(c,u,l,h)}(0,i),n=new r.Plot(e,a,a);document.body.appendChild(n.canvas);let c=!1;t.canvas.addEventListener("mousedown",function(t){c=!0}),t.canvas.addEventListener("mouseup",function(t){c=!1}),t.canvas.addEventListener("mousemove",function(e){if(c){const r=e.pageX,a=t.canvas.height-e.pageY,c=i.xMin+r/t.canvas.width*i.xRange,u=i.yMin+a/t.canvas.height*i.yRange;t.addPoint(c,u);const l=s(o.Complex.fromRectangular(c,u));n.addPoint(l.re,l.im)}})}e.main=c,c()},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});class r{constructor(t,e,n,r){this.xMin=t,this.xMax=e,this.yMin=n,this.yMax=r,this.xRange=e-t,this.yRange=r-n}static fromBounds(t,e,n,o){return new r(t,e,n,o)}static fromZero(t,e){return new r(0,t,0,e)}static symmetric(t,e){return new r(-t,t,-e,e)}transform(t){return t(this)}}e.PlotBounds=r;e.Plot=class{constructor(t,e,n){this.bounds=t,this.canvas=document.createElement("canvas"),this.canvas.width=e,this.canvas.height=n,this.canvas.id="canvas",this.gl=this.canvas.getContext("webgl",{antialias:!1,preserveDrawingBuffer:!0}),this.configureGl()}addPoint(t,e){if(this.isPointOnPlot(t,e)){const n=(t-this.bounds.xMin)/this.bounds.xRange,r=(e-this.bounds.yMin)/this.bounds.yRange,o=n*this.canvas.width,i=r*this.canvas.height;this.gl.bufferData(this.gl.ARRAY_BUFFER,new Float32Array([o,i]),this.gl.STATIC_DRAW),this.gl.drawArrays(this.gl.POINTS,0,1)}}isPointOnPlot(t,e){return t>=this.bounds.xMin&&t<=this.bounds.xMax&&e>=this.bounds.yMin&&e<=this.bounds.yMax}configureGl(){const t=this.createShader(o,this.gl.VERTEX_SHADER),e=this.createShader(i,this.gl.FRAGMENT_SHADER),n=this.gl.createProgram();this.gl.attachShader(n,t),this.gl.attachShader(n,e),this.gl.linkProgram(n),this.gl.useProgram(n);const r=this.gl.getUniformLocation(n,"u_color"),a=this.gl.getAttribLocation(n,"a_position"),s=this.gl.getUniformLocation(n,"u_resolution");this.gl.uniform2f(s,this.canvas.width,this.canvas.height);const c=this.gl.createBuffer();this.gl.bindBuffer(this.gl.ARRAY_BUFFER,c),this.gl.enableVertexAttribArray(a),this.gl.vertexAttribPointer(a,2,this.gl.FLOAT,!1,0,0),this.gl.uniform4f(r,0,0,0,1),this.gl.clearColor(1,1,1,1),this.gl.clear(this.gl.COLOR_BUFFER_BIT)}createShader(t,e){const n=this.gl.createShader(e);return this.gl.shaderSource(n,t),this.gl.compileShader(n),n}};const o="\nattribute vec2 a_position;\nuniform vec2 u_resolution;\n\nvoid main() {\n  // convert the rectangle from pixels to 0.0 to 1.0\n    vec2 zeroToOne = a_position / u_resolution;\n\n    // convert from 0 -> 1 to 0 -> 2\n    vec2 zeroToTwo = zeroToOne * 2.0;\n\n    // convert from 0 -> 2 to -1 -> +1 (clipspace)\n    vec2 clipSpace = zeroToTwo - 1.0;\n\n    gl_PointSize = 1.0;\n    gl_Position = vec4(clipSpace * vec2(1, 1), 0, 1);\n}",i="\nprecision mediump float;\nuniform vec4 u_color;\n\nvoid main() {\n  gl_FragColor = u_color;\n}"},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});class r{constructor(t,e){this.re=t,this.im=e,this.r=Math.sqrt(Math.pow(t,2)+Math.pow(e,2)),this.theta=Math.atan2(e,t)}static zero(){return r.fromRectangular(0,0)}static unit(){return r.fromRectangular(1,0)}static fromRectangular(t,e){return new r(t,e)}static fromPolar(t,e){const n=t*Math.cos(e),o=t*Math.sin(e);return new r(n,o)}static fromComplex(t){return r.fromRectangular(t.re,t.im)}static add(t,e){return r.fromRectangular(t.re+e.re,t.im+e.im)}static subtract(t,e){return r.fromRectangular(t.re-e.re,t.im-e.im)}static multiply(t,e){return r.fromPolar(t.r*e.r,t.theta-e.theta)}static divide(t,e){return r.fromPolar(t.r/e.r,t.theta-e.theta)}static exponent(t,e){const n=Math.pow(t.r,e),o=n*Math.cos(e*t.theta),i=n*Math.sin(e*t.theta);return r.fromRectangular(o,i)}static root(t,e){return r.exponent(t,1/e)}clone(){return r.fromComplex(this)}add(t){return r.add(this,t)}subtract(t){return r.subtract(this,t)}multiply(t){return r.multiply(this,t)}divide(t){return r.divide(this,t)}exponent(t){return r.exponent(this,t)}root(t){return r.root(this,t)}toString(){return`${this.re} + ${this.im}i`}}e.Complex=r}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL21haW4udHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3Bsb3QudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbXBsZXgudHMiXSwibmFtZXMiOlsiaW5zdGFsbGVkTW9kdWxlcyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImV4cG9ydHMiLCJtb2R1bGUiLCJpIiwibCIsIm1vZHVsZXMiLCJjYWxsIiwibSIsImMiLCJkIiwibmFtZSIsImdldHRlciIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJyIiwiU3ltYm9sIiwidG9TdHJpbmdUYWciLCJ2YWx1ZSIsInQiLCJtb2RlIiwiX19lc01vZHVsZSIsIm5zIiwiY3JlYXRlIiwia2V5IiwiYmluZCIsIm4iLCJvYmplY3QiLCJwcm9wZXJ0eSIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwicCIsInMiLCJwbG90XzEiLCJjb21wbGV4XzEiLCJib3VuZHMiLCJQbG90Qm91bmRzIiwiZnJvbUJvdW5kcyIsImNhbnZhc1NpemUiLCJmIiwiZXhwb25lbnQiLCJtYWluIiwiZHJhd1Bsb3QiLCJQbG90IiwiZG9jdW1lbnQiLCJib2R5IiwiYXBwZW5kQ2hpbGQiLCJjYW52YXMiLCJjb21wbGV4Qm91bmRzIiwiY29tcGxleEZ1bmN0aW9uIiwicG9pbnRzVG9TYW1wbGUiLCJtaW5JbWFnZSIsIkNvbXBsZXgiLCJmcm9tUmVjdGFuZ3VsYXIiLCJ4TWluIiwieU1pbiIsIm1heEltYWdlIiwieE1heCIsInlNYXgiLCJyZSIsImltIiwieFN0ZXAiLCJ4UmFuZ2UiLCJ5U3RlcCIsInlSYW5nZSIsIngiLCJ5IiwiaW1hZ2UiLCJNYXRoIiwibWluIiwibWF4IiwiY29uc29sZSIsImxvZyIsImNhbGN1bGF0ZUNvbXBsZXhCb3VuZHMiLCJjb21wbGV4UGxvdCIsImRvd24iLCJhZGRFdmVudExpc3RlbmVyIiwiZXZlbnQiLCJjYW52YXNYIiwicGFnZVgiLCJjYW52YXNZIiwiaGVpZ2h0IiwicGFnZVkiLCJ3aWR0aCIsImFkZFBvaW50IiwiW29iamVjdCBPYmplY3RdIiwidGhpcyIsInRyYW5zZm9ybUZ1bmN0aW9uIiwiY2FudmFzV2lkdGgiLCJjYW52YXNIZWlnaHQiLCJjcmVhdGVFbGVtZW50IiwiaWQiLCJnbCIsImdldENvbnRleHQiLCJhbnRpYWxpYXMiLCJwcmVzZXJ2ZURyYXdpbmdCdWZmZXIiLCJjb25maWd1cmVHbCIsImlzUG9pbnRPblBsb3QiLCJjYW52YXNOb3JtYWxpemVkWCIsImNhbnZhc05vcm1hbGl6ZWRZIiwiYnVmZmVyRGF0YSIsIkFSUkFZX0JVRkZFUiIsIkZsb2F0MzJBcnJheSIsIlNUQVRJQ19EUkFXIiwiZHJhd0FycmF5cyIsIlBPSU5UUyIsInZlcnRleFNoYWRlciIsImNyZWF0ZVNoYWRlciIsInZlcnRleFNoYWRlclRleHQiLCJWRVJURVhfU0hBREVSIiwiZnJhZ21ldFNoYWRlciIsImZyYWdtZW50U2hhZGVyVGV4dCIsIkZSQUdNRU5UX1NIQURFUiIsInByb2dyYW0iLCJjcmVhdGVQcm9ncmFtIiwiYXR0YWNoU2hhZGVyIiwibGlua1Byb2dyYW0iLCJ1c2VQcm9ncmFtIiwiY29sb3JMb2NhdGlvbiIsImdldFVuaWZvcm1Mb2NhdGlvbiIsInBvc2l0aW9uTG9jYXRpb24iLCJnZXRBdHRyaWJMb2NhdGlvbiIsInJlc29sdXRpb25Mb2NhdGlvbiIsInVuaWZvcm0yZiIsImJ1ZmZlciIsImNyZWF0ZUJ1ZmZlciIsImJpbmRCdWZmZXIiLCJlbmFibGVWZXJ0ZXhBdHRyaWJBcnJheSIsInZlcnRleEF0dHJpYlBvaW50ZXIiLCJGTE9BVCIsInVuaWZvcm00ZiIsImNsZWFyQ29sb3IiLCJjbGVhciIsIkNPTE9SX0JVRkZFUl9CSVQiLCJzaGFkZXJUZXh0Iiwic2hhZGVyVHlwZSIsInNoYWRlciIsInNoYWRlclNvdXJjZSIsImNvbXBpbGVTaGFkZXIiLCJyZWFsIiwiaW1hZ2luYXJ5Iiwic3FydCIsInBvdyIsInRoZXRhIiwiYXRhbjIiLCJtYWduaXR1ZGUiLCJhbmdsZSIsImNvcyIsInNpbiIsImMxIiwiYzIiLCJmcm9tUG9sYXIiLCJleHAiLCJtdWx0aXBsaWVyIiwicm9vdCIsImZyb21Db21wbGV4IiwiYWRkIiwic3VidHJhY3QiLCJtdWx0aXBseSIsImRpdmlkZSJdLCJtYXBwaW5ncyI6ImFBQ0EsSUFBQUEsRUFBQSxHQUdBLFNBQUFDLEVBQUFDLEdBR0EsR0FBQUYsRUFBQUUsR0FDQSxPQUFBRixFQUFBRSxHQUFBQyxRQUdBLElBQUFDLEVBQUFKLEVBQUFFLEdBQUEsQ0FDQUcsRUFBQUgsRUFDQUksR0FBQSxFQUNBSCxRQUFBLElBVUEsT0FOQUksRUFBQUwsR0FBQU0sS0FBQUosRUFBQUQsUUFBQUMsSUFBQUQsUUFBQUYsR0FHQUcsRUFBQUUsR0FBQSxFQUdBRixFQUFBRCxRQUtBRixFQUFBUSxFQUFBRixFQUdBTixFQUFBUyxFQUFBVixFQUdBQyxFQUFBVSxFQUFBLFNBQUFSLEVBQUFTLEVBQUFDLEdBQ0FaLEVBQUFhLEVBQUFYLEVBQUFTLElBQ0FHLE9BQUFDLGVBQUFiLEVBQUFTLEVBQUEsQ0FBMENLLFlBQUEsRUFBQUMsSUFBQUwsS0FLMUNaLEVBQUFrQixFQUFBLFNBQUFoQixHQUNBLG9CQUFBaUIsZUFBQUMsYUFDQU4sT0FBQUMsZUFBQWIsRUFBQWlCLE9BQUFDLFlBQUEsQ0FBd0RDLE1BQUEsV0FFeERQLE9BQUFDLGVBQUFiLEVBQUEsY0FBaURtQixPQUFBLEtBUWpEckIsRUFBQXNCLEVBQUEsU0FBQUQsRUFBQUUsR0FFQSxHQURBLEVBQUFBLElBQUFGLEVBQUFyQixFQUFBcUIsSUFDQSxFQUFBRSxFQUFBLE9BQUFGLEVBQ0EsS0FBQUUsR0FBQSxpQkFBQUYsUUFBQUcsV0FBQSxPQUFBSCxFQUNBLElBQUFJLEVBQUFYLE9BQUFZLE9BQUEsTUFHQSxHQUZBMUIsRUFBQWtCLEVBQUFPLEdBQ0FYLE9BQUFDLGVBQUFVLEVBQUEsV0FBeUNULFlBQUEsRUFBQUssVUFD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QUNaLE9BQU84QyxFQUFRMEcsU0FBU3hFLEtBQU1oRixHQUczQitFLE9BQU8vRSxHQUNWLE9BQU84QyxFQUFRMkcsT0FBT3pFLEtBQU1oRixHQUd6QitFLFNBQVNtRSxHQUNaLE9BQU9wRyxFQUFRWixTQUFTOEMsS0FBTWtFLEdBRzNCbkUsS0FBS3FFLEdBQ1IsT0FBT3RHLEVBQVFzRyxLQUFLcEUsS0FBTW9FLEdBR3ZCckUsV0FDSCxTQUFVQyxLQUFLM0IsUUFBUTJCLEtBQUsxQixPQTNGcEM3RCxFQUFBcUQiLCJmaWxlIjoibWFpbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKSB7XG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4gXHRcdH1cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGk6IG1vZHVsZUlkLFxuIFx0XHRcdGw6IGZhbHNlLFxuIFx0XHRcdGV4cG9ydHM6IHt9XG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGdldHRlciB9KTtcbiBcdFx0fVxuIFx0fTtcblxuIFx0Ly8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yID0gZnVuY3Rpb24oZXhwb3J0cykge1xuIFx0XHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcbiBcdFx0fVxuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xuIFx0fTtcblxuIFx0Ly8gY3JlYXRlIGEgZmFrZSBuYW1lc3BhY2Ugb2JqZWN0XG4gXHQvLyBtb2RlICYgMTogdmFsdWUgaXMgYSBtb2R1bGUgaWQsIHJlcXVpcmUgaXRcbiBcdC8vIG1vZGUgJiAyOiBtZXJnZSBhbGwgcHJvcGVydGllcyBvZiB2YWx1ZSBpbnRvIHRoZSBuc1xuIFx0Ly8gbW9kZSAmIDQ6IHJldHVybiB2YWx1ZSB3aGVuIGFscmVhZHkgbnMgb2JqZWN0XG4gXHQvLyBtb2RlICYgOHwxOiBiZWhhdmUgbGlrZSByZXF1aXJlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnQgPSBmdW5jdGlvbih2YWx1ZSwgbW9kZSkge1xuIFx0XHRpZihtb2RlICYgMSkgdmFsdWUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKHZhbHVlKTtcbiBcdFx0aWYobW9kZSAmIDgpIHJldHVybiB2YWx1ZTtcbiBcdFx0aWYoKG1vZGUgJiA0KSAmJiB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnICYmIHZhbHVlICYmIHZhbHVlLl9fZXNNb2R1bGUpIHJldHVybiB2YWx1ZTtcbiBcdFx0dmFyIG5zID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yKG5zKTtcbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KG5zLCAnZGVmYXVsdCcsIHsgZW51bWVyYWJsZTogdHJ1ZSwgdmFsdWU6IHZhbHVlIH0pO1xuIFx0XHRpZihtb2RlICYgMiAmJiB0eXBlb2YgdmFsdWUgIT0gJ3N0cmluZycpIGZvcih2YXIga2V5IGluIHZhbHVlKSBfX3dlYnBhY2tfcmVxdWlyZV9fLmQobnMsIGtleSwgZnVuY3Rpb24oa2V5KSB7IHJldHVybiB2YWx1ZVtrZXldOyB9LmJpbmQobnVsbCwga2V5KSk7XG4gXHRcdHJldHVybiBucztcbiBcdH07XG5cbiBcdC8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcbiBcdFx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDpcbiBcdFx0XHRmdW5jdGlvbiBnZXRNb2R1bGVFeHBvcnRzKCkgeyByZXR1cm4gbW9kdWxlOyB9O1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCAnYScsIGdldHRlcik7XG4gXHRcdHJldHVybiBnZXR0ZXI7XG4gXHR9O1xuXG4gXHQvLyBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGxcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsgfTtcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG5cblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSAwKTtcbiIsImltcG9ydCB7IFBsb3QsIFBsb3RCb3VuZHMgfSBmcm9tIFwiLi9wbG90XCI7XG5pbXBvcnQgeyBDb21wbGV4LCBDb21wbGV4RnVuY3Rpb24gfSBmcm9tIFwiLi9jb21wbGV4XCI7XG5cbmNvbnN0IGJvdW5kcyA9IFBsb3RCb3VuZHMuZnJvbUJvdW5kcygtMTAsIDEwLCAtMTAsIDEwKTtcbmNvbnN0IGNhbnZhc1NpemUgPSA1MDA7XG5cbmNvbnN0IGY6IENvbXBsZXhGdW5jdGlvbiA9IGMgPT4gYy5leHBvbmVudCgyKTtcblxuZXhwb3J0IGZ1bmN0aW9uIG1haW4oKSB7XG4gICAgY29uc3QgZHJhd1Bsb3QgPSBuZXcgUGxvdChib3VuZHMsIGNhbnZhc1NpemUsIGNhbnZhc1NpemUpO1xuICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoZHJhd1Bsb3QuY2FudmFzKTtcblxuICAgIGNvbnN0IGNvbXBsZXhCb3VuZHMgPSBjYWxjdWxhdGVDb21wbGV4Qm91bmRzKGYsIGJvdW5kcyk7XG5cbiAgICBjb25zdCBjb21wbGV4UGxvdCA9IG5ldyBQbG90KGNvbXBsZXhCb3VuZHMsIGNhbnZhc1NpemUsIGNhbnZhc1NpemUpO1xuICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoY29tcGxleFBsb3QuY2FudmFzKTtcblxuICAgIGxldCBkb3duID0gZmFsc2U7XG5cbiAgICBkcmF3UGxvdC5jYW52YXMuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLCBmdW5jdGlvbihldmVudCkgeyBcbiAgICAgIGRvd24gPSB0cnVlO1xuICAgIH0pO1xuICAgIFxuICAgIGRyYXdQbG90LmNhbnZhcy5hZGRFdmVudExpc3RlbmVyKFwibW91c2V1cFwiLCBmdW5jdGlvbihldmVudCkge1xuICAgICAgICBkb3duID0gZmFsc2U7XG4gICAgfSk7XG5cbiAgICBkcmF3UGxvdC5jYW52YXMuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlbW92ZVwiLCBmdW5jdGlvbihldmVudCkge1xuICAgICAgICBpZiAoZG93bikge1xuICAgICAgICAgICAgY29uc3QgY2FudmFzWCA9IGV2ZW50LnBhZ2VYO1xuICAgICAgICAgICAgY29uc3QgY2FudmFzWSA9IGRyYXdQbG90LmNhbnZhcy5oZWlnaHQgLSBldmVudC5wYWdlWTtcblxuICAgICAgICAgICAgY29uc3QgeCA9IGJvdW5kcy54TWluICsgKGNhbnZhc1ggLyBkcmF3UGxvdC5jYW52YXMud2lkdGgpICogYm91bmRzLnhSYW5nZTtcbiAgICAgICAgICAgIGNvbnN0IHkgPSBib3VuZHMueU1pbiArIChjYW52YXNZIC8gZHJhd1Bsb3QuY2FudmFzLmhlaWdodCkgKiBib3VuZHMueVJhbmdlO1xuXG4gICAgICAgICAgICBkcmF3UGxvdC5hZGRQb2ludCh4LCB5KTtcblxuICAgICAgICAgICAgY29uc3QgYyA9IGYoQ29tcGxleC5mcm9tUmVjdGFuZ3VsYXIoeCwgeSkpO1xuXG4gICAgICAgICAgICBjb21wbGV4UGxvdC5hZGRQb2ludChjLnJlLCBjLmltKTtcbiAgICAgICAgfVxuICAgIH0pO1xufVxuXG5mdW5jdGlvbiBjYWxjdWxhdGVDb21wbGV4Qm91bmRzKGNvbXBsZXhGdW5jdGlvbjogQ29tcGxleEZ1bmN0aW9uLCBib3VuZHM6IFBsb3RCb3VuZHMsIHBvaW50c1RvU2FtcGxlOiBudW1iZXIgPSAxMDApOiBQbG90Qm91bmRzIHtcbiAgICBjb25zdCBtaW5JbWFnZSA9IGYoQ29tcGxleC5mcm9tUmVjdGFuZ3VsYXIoYm91bmRzLnhNaW4sIGJvdW5kcy55TWluKSk7XG4gICAgY29uc3QgbWF4SW1hZ2UgPSBmKENvbXBsZXguZnJvbVJlY3Rhbmd1bGFyKGJvdW5kcy54TWF4LCBib3VuZHMueU1heCkpO1xuXG4gICAgbGV0IHhNaW4gPSBtaW5JbWFnZS5yZTtcbiAgICBsZXQgeE1heCA9IG1heEltYWdlLnJlO1xuICAgIGxldCB5TWluID0gbWluSW1hZ2UuaW07XG4gICAgbGV0IHlNYXggPSBtYXhJbWFnZS5pbTtcblxuICAgIGNvbnN0IHhTdGVwID0gYm91bmRzLnhSYW5nZSAvIHBvaW50c1RvU2FtcGxlO1xuICAgIGNvbnN0IHlTdGVwID0gYm91bmRzLnlSYW5nZSAvIHBvaW50c1RvU2FtcGxlO1xuXG4gICAgZm9yIChsZXQgeCA9IGJvdW5kcy54TWluOyB4IDwgYm91bmRzLnhNYXg7IHggKz0geFN0ZXApIHtcbiAgICAgICAgZm9yIChsZXQgeSA9IGJvdW5kcy55TWluOyB5IDwgYm91bmRzLnlNYXg7IHkgKz0geVN0ZXApIHtcbiAgICAgICAgICAgIGNvbnN0IGltYWdlID0gZihDb21wbGV4LmZyb21SZWN0YW5ndWxhcih4LCB5KSk7XG4gICAgICAgICAgICB4TWluID0gTWF0aC5taW4oaW1hZ2UucmUsIHhNaW4pO1xuICAgICAgICAgICAgeE1heCA9IE1hdGgubWF4KGltYWdlLnJlLCB4TWF4KTtcbiAgICAgICAgICAgIHlNaW4gPSBNYXRoLm1pbihpbWFnZS5pbSwgeU1pbik7XG4gICAgICAgICAgICB5TWF4ID0gTWF0aC5tYXgoaW1hZ2UuaW0sIHlNYXgpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgY29uc29sZS5sb2coUGxvdEJvdW5kcy5mcm9tQm91bmRzKHhNaW4sIHhNYXgsIHlNaW4sIHlNYXgpKTtcbiAgICBcbiAgICByZXR1cm4gUGxvdEJvdW5kcy5mcm9tQm91bmRzKHhNaW4sIHhNYXgsIHlNaW4sIHlNYXgpO1xufVxuXG5tYWluKCk7IiwiZXhwb3J0IGNsYXNzIFBsb3RCb3VuZHMge1xuICAgIHJlYWRvbmx5IHhNaW46IG51bWJlcjtcbiAgICByZWFkb25seSB4TWF4OiBudW1iZXI7XG4gICAgcmVhZG9ubHkgeU1pbjogbnVtYmVyO1xuICAgIHJlYWRvbmx5IHlNYXg6IG51bWJlcjtcblxuICAgIHJlYWRvbmx5IHhSYW5nZTogbnVtYmVyO1xuICAgIHJlYWRvbmx5IHlSYW5nZTogbnVtYmVyO1xuICAgIFxuICAgIGNvbnN0cnVjdG9yKHhNaW46IG51bWJlciwgeE1heDogbnVtYmVyLCB5TWluOiBudW1iZXIsIHlNYXg6IG51bWJlcikge1xuICAgICAgICB0aGlzLnhNaW4gPSB4TWluO1xuICAgICAgICB0aGlzLnhNYXggPSB4TWF4O1xuICAgICAgICB0aGlzLnlNaW4gPSB5TWluO1xuICAgICAgICB0aGlzLnlNYXggPSB5TWF4O1xuXG4gICAgICAgIHRoaXMueFJhbmdlID0geE1heCAtIHhNaW47XG4gICAgICAgIHRoaXMueVJhbmdlID0geU1heCAtIHlNaW47XG4gICAgfVxuXG4gICAgc3RhdGljIGZyb21Cb3VuZHMoeE1pbjogbnVtYmVyLCB4TWF4OiBudW1iZXIsIHlNaW46IG51bWJlciwgeU1heDogbnVtYmVyKTogUGxvdEJvdW5kcyB7XG4gICAgICAgIHJldHVybiBuZXcgUGxvdEJvdW5kcyh4TWluLCB4TWF4LCB5TWluLCB5TWF4KTtcbiAgICB9XG5cbiAgICBzdGF0aWMgZnJvbVplcm8oeE1heDogbnVtYmVyLCB5TWF4OiBudW1iZXIpOiBQbG90Qm91bmRzIHtcbiAgICAgICAgcmV0dXJuIG5ldyBQbG90Qm91bmRzKDAsIHhNYXgsIDAsIHlNYXgpO1xuICAgIH1cblxuICAgIHN0YXRpYyBzeW1tZXRyaWMoeDogbnVtYmVyLCB5OiBudW1iZXIpOiBQbG90Qm91bmRzIHtcbiAgICAgICAgcmV0dXJuIG5ldyBQbG90Qm91bmRzKC14LCB4LCAteSwgeSk7XG4gICAgfVxuXG4gICAgcHVibGljIHRyYW5zZm9ybSh0cmFuc2Zvcm1GdW5jdGlvbjogKGJvdW5kc0lucHV0OiBQbG90Qm91bmRzKSA9PiBQbG90Qm91bmRzKTogUGxvdEJvdW5kcyB7XG4gICAgICAgIHJldHVybiB0cmFuc2Zvcm1GdW5jdGlvbih0aGlzKTtcbiAgICB9XG59XG5cbmV4cG9ydCBjbGFzcyBQbG90IHtcbiAgICBwdWJsaWMgcmVhZG9ubHkgYm91bmRzOiBQbG90Qm91bmRzO1xuXG4gICAgcHVibGljIHJlYWRvbmx5IGNhbnZhczogSFRNTENhbnZhc0VsZW1lbnQ7XG4gICAgcHVibGljIHJlYWRvbmx5IGdsOiBXZWJHTFJlbmRlcmluZ0NvbnRleHQ7XG5cbiAgICBjb25zdHJ1Y3Rvcihib3VuZHM6IFBsb3RCb3VuZHMsIGNhbnZhc1dpZHRoOiBudW1iZXIsIGNhbnZhc0hlaWdodDogbnVtYmVyKSB7XG4gICAgICAgIHRoaXMuYm91bmRzID0gYm91bmRzO1xuXG4gICAgICAgIHRoaXMuY2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImNhbnZhc1wiKTtcbiAgICAgICAgdGhpcy5jYW52YXMud2lkdGggPSBjYW52YXNXaWR0aDtcbiAgICAgICAgdGhpcy5jYW52YXMuaGVpZ2h0ID0gY2FudmFzSGVpZ2h0O1xuICAgICAgICB0aGlzLmNhbnZhcy5pZCA9IFwiY2FudmFzXCI7XG4gICAgICAgIFxuICAgICAgICB0aGlzLmdsID0gdGhpcy5jYW52YXMuZ2V0Q29udGV4dChcIndlYmdsXCIsIHsgYW50aWFsaWFzOiBmYWxzZSwgcHJlc2VydmVEcmF3aW5nQnVmZmVyOiB0cnVlIH0pITtcbiAgICAgICAgdGhpcy5jb25maWd1cmVHbCgpO1xuICAgIH1cblxuICAgIHB1YmxpYyBhZGRQb2ludCh4OiBudW1iZXIsIHk6IG51bWJlcikge1xuICAgICAgICBpZiAodGhpcy5pc1BvaW50T25QbG90KHgsIHkpKSB7XG4gICAgICAgICAgICBjb25zdCBjYW52YXNOb3JtYWxpemVkWCA9ICh4IC0gdGhpcy5ib3VuZHMueE1pbikgLyB0aGlzLmJvdW5kcy54UmFuZ2U7XG4gICAgICAgICAgICBjb25zdCBjYW52YXNOb3JtYWxpemVkWSA9ICh5IC0gdGhpcy5ib3VuZHMueU1pbikgLyB0aGlzLmJvdW5kcy55UmFuZ2U7XG5cbiAgICAgICAgICAgIGNvbnN0IGNhbnZhc1ggPSBjYW52YXNOb3JtYWxpemVkWCAqIHRoaXMuY2FudmFzLndpZHRoO1xuICAgICAgICAgICAgY29uc3QgY2FudmFzWSA9IGNhbnZhc05vcm1hbGl6ZWRZICogdGhpcy5jYW52YXMuaGVpZ2h0O1xuXG4gICAgICAgICAgICB0aGlzLmdsLmJ1ZmZlckRhdGEodGhpcy5nbC5BUlJBWV9CVUZGRVIsIG5ldyBGbG9hdDMyQXJyYXkoW2NhbnZhc1gsIGNhbnZhc1ldKSwgdGhpcy5nbC5TVEFUSUNfRFJBVyk7XG4gICAgICAgICAgICB0aGlzLmdsLmRyYXdBcnJheXModGhpcy5nbC5QT0lOVFMsIDAsIDEpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHVibGljIGlzUG9pbnRPblBsb3QoeDogbnVtYmVyLCB5OiBudW1iZXIpIDogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiB4ID49IHRoaXMuYm91bmRzLnhNaW4gJiYgeCA8PSB0aGlzLmJvdW5kcy54TWF4ICYmIHkgPj0gdGhpcy5ib3VuZHMueU1pbiAmJiB5IDw9IHRoaXMuYm91bmRzLnlNYXg7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBjb25maWd1cmVHbCgpIHtcbiAgICAgICAgY29uc3QgdmVydGV4U2hhZGVyID0gdGhpcy5jcmVhdGVTaGFkZXIodmVydGV4U2hhZGVyVGV4dCwgdGhpcy5nbC5WRVJURVhfU0hBREVSKTtcbiAgICAgICAgY29uc3QgZnJhZ21ldFNoYWRlciA9IHRoaXMuY3JlYXRlU2hhZGVyKGZyYWdtZW50U2hhZGVyVGV4dCwgdGhpcy5nbC5GUkFHTUVOVF9TSEFERVIpO1xuXG4gICAgICAgIGNvbnN0IHByb2dyYW0gPSB0aGlzLmdsLmNyZWF0ZVByb2dyYW0oKSE7XG4gICAgICAgIFxuICAgICAgICB0aGlzLmdsLmF0dGFjaFNoYWRlcihwcm9ncmFtLCB2ZXJ0ZXhTaGFkZXIpO1xuICAgICAgICB0aGlzLmdsLmF0dGFjaFNoYWRlcihwcm9ncmFtLCBmcmFnbWV0U2hhZGVyKTtcbiAgICAgICAgXG4gICAgICAgIHRoaXMuZ2wubGlua1Byb2dyYW0ocHJvZ3JhbSk7XG4gICAgICAgIHRoaXMuZ2wudXNlUHJvZ3JhbShwcm9ncmFtKTtcblxuICAgICAgICBjb25zdCBjb2xvckxvY2F0aW9uID0gdGhpcy5nbC5nZXRVbmlmb3JtTG9jYXRpb24ocHJvZ3JhbSwgXCJ1X2NvbG9yXCIpO1xuICAgICAgICBjb25zdCBwb3NpdGlvbkxvY2F0aW9uID0gdGhpcy5nbC5nZXRBdHRyaWJMb2NhdGlvbihwcm9ncmFtLCBcImFfcG9zaXRpb25cIik7XG4gICAgICAgIGNvbnN0IHJlc29sdXRpb25Mb2NhdGlvbiA9IHRoaXMuZ2wuZ2V0VW5pZm9ybUxvY2F0aW9uKHByb2dyYW0sIFwidV9yZXNvbHV0aW9uXCIpO1xuICAgICAgICBcbiAgICAgICAgdGhpcy5nbC51bmlmb3JtMmYocmVzb2x1dGlvbkxvY2F0aW9uLCB0aGlzLmNhbnZhcy53aWR0aCwgdGhpcy5jYW52YXMuaGVpZ2h0KTtcblxuICAgICAgICBjb25zdCBidWZmZXIgPSB0aGlzLmdsLmNyZWF0ZUJ1ZmZlcigpO1xuICAgICAgICB0aGlzLmdsLmJpbmRCdWZmZXIodGhpcy5nbC5BUlJBWV9CVUZGRVIsIGJ1ZmZlcik7XG4gICAgICAgIHRoaXMuZ2wuZW5hYmxlVmVydGV4QXR0cmliQXJyYXkocG9zaXRpb25Mb2NhdGlvbik7XG4gICAgICAgIHRoaXMuZ2wudmVydGV4QXR0cmliUG9pbnRlcihwb3NpdGlvbkxvY2F0aW9uLCAyLCB0aGlzLmdsLkZMT0FULCBmYWxzZSwgMCwgMCk7XG4gICAgICAgIHRoaXMuZ2wudW5pZm9ybTRmKGNvbG9yTG9jYXRpb24sIDAsIDAsIDAsIDEpO1xuXG4gICAgICAgIHRoaXMuZ2wuY2xlYXJDb2xvcigxLCAxLCAxLCAxKTtcbiAgICAgICAgdGhpcy5nbC5jbGVhcih0aGlzLmdsLkNPTE9SX0JVRkZFUl9CSVQpO1xuICAgIH1cbiAgICBcbiAgICBwcml2YXRlIGNyZWF0ZVNoYWRlcihzaGFkZXJUZXh0OiBzdHJpbmcsIHNoYWRlclR5cGU6IG51bWJlcikge1xuICAgICAgICBjb25zdCBzaGFkZXIgPSB0aGlzLmdsLmNyZWF0ZVNoYWRlcihzaGFkZXJUeXBlKSE7XG4gICAgICAgIHRoaXMuZ2wuc2hhZGVyU291cmNlKHNoYWRlciwgc2hhZGVyVGV4dCk7XG4gICAgICAgIHRoaXMuZ2wuY29tcGlsZVNoYWRlcihzaGFkZXIpO1xuICAgICAgICByZXR1cm4gc2hhZGVyO1xuICAgIH1cbn1cblxuY29uc3QgdmVydGV4U2hhZGVyVGV4dCA9IGBcbmF0dHJpYnV0ZSB2ZWMyIGFfcG9zaXRpb247XG51bmlmb3JtIHZlYzIgdV9yZXNvbHV0aW9uO1xuXG52b2lkIG1haW4oKSB7XG4gIC8vIGNvbnZlcnQgdGhlIHJlY3RhbmdsZSBmcm9tIHBpeGVscyB0byAwLjAgdG8gMS4wXG4gICAgdmVjMiB6ZXJvVG9PbmUgPSBhX3Bvc2l0aW9uIC8gdV9yZXNvbHV0aW9uO1xuXG4gICAgLy8gY29udmVydCBmcm9tIDAgLT4gMSB0byAwIC0+IDJcbiAgICB2ZWMyIHplcm9Ub1R3byA9IHplcm9Ub09uZSAqIDIuMDtcblxuICAgIC8vIGNvbnZlcnQgZnJvbSAwIC0+IDIgdG8gLTEgLT4gKzEgKGNsaXBzcGFjZSlcbiAgICB2ZWMyIGNsaXBTcGFjZSA9IHplcm9Ub1R3byAtIDEuMDtcblxuICAgIGdsX1BvaW50U2l6ZSA9IDEuMDtcbiAgICBnbF9Qb3NpdGlvbiA9IHZlYzQoY2xpcFNwYWNlICogdmVjMigxLCAxKSwgMCwgMSk7XG59YDtcblxuY29uc3QgZnJhZ21lbnRTaGFkZXJUZXh0ID0gYFxucHJlY2lzaW9uIG1lZGl1bXAgZmxvYXQ7XG51bmlmb3JtIHZlYzQgdV9jb2xvcjtcblxudm9pZCBtYWluKCkge1xuICBnbF9GcmFnQ29sb3IgPSB1X2NvbG9yO1xufWA7IiwiZXhwb3J0IHR5cGUgQ29tcGxleEZ1bmN0aW9uID0gKGM6IENvbXBsZXgpID0+IENvbXBsZXg7XG5cbmV4cG9ydCBjbGFzcyBDb21wbGV4IHtcbiAgICByZWFkb25seSByZTogbnVtYmVyO1xuICAgIHJlYWRvbmx5IGltOiBudW1iZXI7XG4gICAgcmVhZG9ubHkgcjogbnVtYmVyO1xuICAgIHJlYWRvbmx5IHRoZXRhOiBudW1iZXI7XG5cbiAgICBjb25zdHJ1Y3RvcihyZWFsOiBudW1iZXIsIGltYWdpbmFyeTogbnVtYmVyKSB7IFxuICAgICAgICB0aGlzLnJlID0gcmVhbDtcbiAgICAgICAgdGhpcy5pbSA9IGltYWdpbmFyeTtcbiAgICAgICAgdGhpcy5yID0gTWF0aC5zcXJ0KHJlYWwgKiogMiArIGltYWdpbmFyeSAqKiAyKTtcbiAgICAgICAgdGhpcy50aGV0YSA9IE1hdGguYXRhbjIoaW1hZ2luYXJ5LCByZWFsKTtcbiAgICB9XG5cbiAgICBzdGF0aWMgemVybygpIDogQ29tcGxleCB7XG4gICAgICAgIHJldHVybiBDb21wbGV4LmZyb21SZWN0YW5ndWxhcigwLCAwKTtcbiAgICB9XG5cbiAgICBzdGF0aWMgdW5pdCgpIDogQ29tcGxleCB7XG4gICAgICAgIHJldHVybiBDb21wbGV4LmZyb21SZWN0YW5ndWxhcigxLCAwKTtcbiAgICB9XG5cbiAgICBzdGF0aWMgZnJvbVJlY3Rhbmd1bGFyKHJlYWw6IG51bWJlciwgaW1hZ2luYXJ5OiBudW1iZXIpIDogQ29tcGxleCB7XG4gICAgICAgIHJldHVybiBuZXcgQ29tcGxleChyZWFsLCBpbWFnaW5hcnkpO1xuICAgIH1cblxuICAgIHN0YXRpYyBmcm9tUG9sYXIobWFnbml0dWRlOiBudW1iZXIsIGFuZ2xlOiBudW1iZXIpIDogQ29tcGxleCB7XG4gICAgICAgIGNvbnN0IHJlYWwgPSBtYWduaXR1ZGUgKiBNYXRoLmNvcyhhbmdsZSk7XG4gICAgICAgIGNvbnN0IGltYWdpbmFyeSA9IG1hZ25pdHVkZSAqIE1hdGguc2luKGFuZ2xlKTtcbiAgICAgICAgcmV0dXJuIG5ldyBDb21wbGV4KHJlYWwsIGltYWdpbmFyeSk7XG4gICAgfVxuXG4gICAgc3RhdGljIGZyb21Db21wbGV4KGM6IENvbXBsZXgpIDogQ29tcGxleCB7XG4gICAgICAgIHJldHVybiBDb21wbGV4LmZyb21SZWN0YW5ndWxhcihjLnJlLCBjLmltKTtcbiAgICB9XG5cbiAgICBzdGF0aWMgYWRkKGMxOiBDb21wbGV4LCBjMjogQ29tcGxleCkgOiBDb21wbGV4IHtcbiAgICAgICAgcmV0dXJuIENvbXBsZXguZnJvbVJlY3Rhbmd1bGFyKGMxLnJlICsgYzIucmUsIGMxLmltICsgYzIuaW0pO1xuICAgIH1cblxuICAgIHN0YXRpYyBzdWJ0cmFjdChjMTogQ29tcGxleCwgYzI6IENvbXBsZXgpIDogQ29tcGxleCB7XG4gICAgICAgIHJldHVybiBDb21wbGV4LmZyb21SZWN0YW5ndWxhcihjMS5yZSAtIGMyLnJlLCBjMS5pbSAtIGMyLmltKTtcbiAgICB9XG5cbiAgICBzdGF0aWMgbXVsdGlwbHkoYzE6IENvbXBsZXgsIGMyOiBDb21wbGV4KSA6IENvbXBsZXgge1xuICAgICAgICByZXR1cm4gQ29tcGxleC5mcm9tUG9sYXIoYzEuciAqIGMyLnIsIGMxLnRoZXRhIC0gYzIudGhldGEpICAgIFxuICAgIH1cblxuICAgIHN0YXRpYyBkaXZpZGUoYzE6IENvbXBsZXgsIGMyOiBDb21wbGV4KSA6IENvbXBsZXgge1xuICAgICAgICByZXR1cm4gQ29tcGxleC5mcm9tUG9sYXIoYzEuciAvIGMyLnIsIGMxLnRoZXRhIC0gYzIudGhldGEpO1xuICAgIH1cblxuICAgIHN0YXRpYyBleHBvbmVudChjOiBDb21wbGV4LCBleHA6IG51bWJlcikgOiBDb21wbGV4IHtcbiAgICAgICAgY29uc3QgbXVsdGlwbGllciA9IGMuciAqKiBleHA7XG4gICAgICAgIGNvbnN0IHJlID0gbXVsdGlwbGllciAqIE1hdGguY29zKGV4cCAqIGMudGhldGEpO1xuICAgICAgICBjb25zdCBpbSA9IG11bHRpcGxpZXIgKiBNYXRoLnNpbihleHAgKiBjLnRoZXRhKTtcbiAgICAgICAgcmV0dXJuIENvbXBsZXguZnJvbVJlY3Rhbmd1bGFyKHJlLCBpbSk7XG4gICAgfVxuXG4gICAgc3RhdGljIHJvb3QoYzogQ29tcGxleCwgcm9vdDogbnVtYmVyKSA6IENvbXBsZXgge1xuICAgICAgICByZXR1cm4gQ29tcGxleC5leHBvbmVudChjLCAxL3Jvb3QpO1xuICAgIH1cblxuICAgIHB1YmxpYyBjbG9uZSgpIDogQ29tcGxleCB7XG4gICAgICAgIHJldHVybiBDb21wbGV4LmZyb21Db21wbGV4KHRoaXMpO1xuICAgIH1cblxuICAgIHB1YmxpYyBhZGQoYzogQ29tcGxleCkgOiBDb21wbGV4IHtcbiAgICAgICAgcmV0dXJuIENvbXBsZXguYWRkKHRoaXMsIGMpO1xuICAgIH1cblxuICAgIHB1YmxpYyBzdWJ0cmFjdChjOiBDb21wbGV4KSA6IENvbXBsZXgge1xuICAgICAgICByZXR1cm4gQ29tcGxleC5zdWJ0cmFjdCh0aGlzLCBjKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgbXVsdGlwbHkoYzogQ29tcGxleCkgOiBDb21wbGV4IHtcbiAgICAgICAgcmV0dXJuIENvbXBsZXgubXVsdGlwbHkodGhpcywgYyk7XG4gICAgfVxuXG4gICAgcHVibGljIGRpdmlkZShjOiBDb21wbGV4KSA6IENvbXBsZXgge1xuICAgICAgICByZXR1cm4gQ29tcGxleC5kaXZpZGUodGhpcywgYyk7XG4gICAgfVxuXG4gICAgcHVibGljIGV4cG9uZW50KGV4cDogbnVtYmVyKSA6IENvbXBsZXgge1xuICAgICAgICByZXR1cm4gQ29tcGxleC5leHBvbmVudCh0aGlzLCBleHApO1xuICAgIH1cblxuICAgIHB1YmxpYyByb290KHJvb3Q6IG51bWJlcikgOiBDb21wbGV4IHtcbiAgICAgICAgcmV0dXJuIENvbXBsZXgucm9vdCh0aGlzLCByb290KTtcbiAgICB9XG5cbiAgICBwdWJsaWMgdG9TdHJpbmcoKTogc3RyaW5nIHtcbiAgICAgICAgcmV0dXJuIGAke3RoaXMucmV9ICsgJHt0aGlzLmltfWlgO1xuICAgIH1cbn0iXSwic291cmNlUm9vdCI6IiJ9